# 벨만-포드
벨만-포드(bellman-ford-moore)알고리즘은 그래프에서 최단 거리를 구하는 알고리즘으로, 주요 특징은 다음과 같습니다.

| 기능                                                                                       | 특징                                                             | 시간 복잡도(노드 수:V) |
|------------------------------------------------------------------------------------------|----------------------------------------------------------------|----------------|
| 특정 출발 노드에서 다른 모든 <br>노드까지의 최단경로 탐색| - 음수 가중치 에지가 있어도 수행할 수있음<br>- 전체 그래프에서 음수 사이클의 존재 여부를 판단할 수 있음 | O(VE)          |

### 벨만-포드의 핵심 이론
벨만-포드 알고리즘은 다음 3개지 단계의 원리로 동작합니다.

#### 1. 에지 리스트로 그래프를 구현하고 최단 경로 리스트 초기화하기
벤만-포드 알고리즘은 에지를 중심으로 동작하므로 그래프를 에지리스트로 구현합니다. 
또한 최단 경로 리스트를 출발 노드는0, 나머지 노드는 무한대로 초기화합니다. 다음 
예에서 출발 노드를 1로 선택해 벨만-포드 알고리즘을 진행하며 알아보겠습니다.  
☞edge 클래스는 일반적으로 노드 변수 2개와 가중치 변수로 구성돼 있습니다.  
![벨만 포드 1](https://github.com/leesulgi66/Algorithm/assets/107823688/783d382c-48b6-4b54-b27f-4f43861eba1e)

#### 2. 모든 에지를 확인해 정답 리스트 업데이트하기
최단 거리 리스트에서 업데이트 반복 횟수는 노드 개수 -1입니다. 노드 개수가 N이고, 
음수 사이클이 없을 때 특정 두 노드의 최단 거리를 구성할 수 있는 에지의 최대 개수는 
N-1이기 때문입니다. 모든 에지 E=(s,e,w)에서 다음 조건을 만족하면 업데이트를 실행합니다. 
업데이트 반복 횟수가 K번이라면 해당 시점에 정답 리스트의 값은 시작점에서 K개의 
에지를 사용했을 때 각 노드에 대한 최단 거리입니다.  
<br>
**업데이트 조건과 방법**  
D[s] != ∞이며, D[e] > D[s]+w 일 때 D[e] = D[s]+w로 리스트 값을 업데이트한다.  

☞음수 사이클이 없을 때 최대 에지 개수가 나오려면 사향 트리 형태에서 양 도착 노드를 선택해야 합니다.  
☞에지의 출발 노드를 s, 종료 노드를 e,에지의 가중치를 w로 가정했습니다.  

![벨만 포드 2](https://github.com/leesulgi66/Algorithm/assets/107823688/06c9543e-58b2-43e9-b5bb-291498cc2847)
음수 사이클이 없을 때 N-1번 에지 사용 횟수를 반복하면 출발 노드와 모든 노드 간의 
최단 거리를 알려 주는 정답 리스트가 완성됩니다. 이렇게 완성한 후 마지막으로 이 
그래프에 음수 사이클이 존재하는지 확인해야 합니다.

#### 3. 음수 사이클 유무 확인하기
음수 사이클 유무를 확인하기 위해 모든 에지를 한 번씩 다시 사용해 업데이트되는 
노드가 발생하는지 확인합니다. 만약 업데이트되는 노드가 있다면 음수 사이클이 
있다는 뜻이 되고, 2단계에서 도출한 정답 리스트가 무의미하고 최단 거리를 찾을 
수 없는 그래프라는 뜻이 됩니다. 음수 사이클이 존재하면 이 사이클을 무한하게 
돌수록 가중치가 계속 감소하므로 최단 거리를 구할 수 없습니다.  
![벨만 포드 3](https://github.com/leesulgi66/Algorithm/assets/107823688/d5117217-a61d-4c2a-9c42-93a8f7f4b526)
실제 알고리즘 코딩 테스트에서는 벨만-포드 알고리즘을 사용해 최단 거리를 구하는 
문제보다 음수 사이클을 판별하는 문제가 더 빈번하게 출제됩니다. 따라서 마지막에 
한 번 더 모든 에지를 사용해 업데이트되는 노드가 존재하는지 확인해야 합니다.

### 벨만-포드 정리
1. 벨만-포드의 최단 거리는 N-1번의 에지 업데이트로 구할 수 있다.
2. 최단 거리를 구한 N-1번의 최단거리 리스트에서 한번 더 업데이트를 시도해서 어느 곳에서라도 업데이트가 일어나는 순간 음수 사이클이 있는 그래프이다.
